webpackJsonp([78],{Ls7v:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=a("Gu7T"),i=a.n(o),n=a("qKdJ"),s={data:function(){return{isActive:1,inforList:[],option1:[],xqTree:[],isAddorUpdate:1,formSearch:{xqId:""},formData:[],formUpdate:{},total:0,dataTree:[],defaultProps:{children:"children",label:"name"},defaultProps2:{children:"children",label:"name",value:"id",expandTrigger:"hover",checkStrictly:!0},typeId:{},updata:[]}},methods:{gogudinfeiyon_config:function(){this.$router.push({path:"/gudinfeiyon_config"})},updateMeterPriceConfig:function(){var t=this;if(0!=this.updata.length){var e=this.updata;console.log(e),Object(n._171)(e).then(function(e){console.log(e),200==e.data.code?t.$message("配置成功"):t.$message("配置失败")})}else this.$message("请勾选对象")},changeRadio:function(t){console.log(t),this.typeId.type=t.type,1==t.type?this.getMeterPriceConfig(this.formSearch.xqId,null,t.id):this.getMeterPriceConfig(this.formSearch.xqId,t.id,null)},getMeterPriceConfig:function(t,e,a){var o=this,i={xqId:t,houseId:e,sectionId:a};Object(n._111)(i).then(function(t){console.log(t),200==t.data.code&&(o.inforList=t.data.data)})},loadNode:function(t,e){if(0==t.level)return e(t.data);var a=t.data.children||[],o=t.data.houses||[],n=[].concat(i()(a),i()(o));setTimeout(function(){e(n)},500)},getlist:function(t){var e=this;t.xqId&&(this.formSearch=t);var a=[this.formSearch.xqId];console.log(this.formSearch),Object(n._99)(a).then(function(t){console.log(t),200==t.data.code?(e.formData=t.data.data.filter(function(t){return t.gmtCreate&&(t.gmtCreate=e.$root.getDateArray(t.gmtCreate)[9]),t}),e.total=t.data.data.total):e.$message(t.data.msg)})},getInit:function(){var t=this;Object(n._115)({name:"",status:1}).then(function(e){console.log(e),200==e.data.code&&(t.dataTree=e.data.data,Object(n._196)({}).then(function(e){if(console.log(e),200==e.data.code){t.xqTree=e.data.data;var a={xqId:t.xqTree[0].id||""};t.getlist(a)}}))})},selsChange:function(t){var e=this;console.log(t),this.updata=[],t.forEach(function(t){var a={id:t.id,unitPrice:t.unitPrice,useAble:t.useAble,xqId:e.formSearch.xqId,type:e.typeId.type};e.updata.push(a)})},handleChange:function(t){var e=this;0!=t.length?(console.log(t),this.formSearch.orgId=this.$refs.cascader.getCheckedNodes()[0].data.id):this.formSearch.orgId="";var a=[this.formSearch.xqId];Object(n._99)(a).then(function(t){console.log(t),200==t.data.code?(e.formData=t.data.data.filter(function(t){return t.gmtCreate&&(t.gmtCreate=e.$root.getDateArray(t.gmtCreate)[9]),t}),e.total=t.data.data.total):e.$message(t.data.msg)})}},mounted:function(){this.getInit()}},l={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"modlude"},[a("div",{staticClass:"nav_options",staticStyle:{"margin-bottom":"20px"}},[a("div",{staticClass:"nav_option",class:{nav_option_active:1==t.isActive},on:{click:function(e){t.isActive=1}}},[a("span",[t._v("水电煤配置")])]),t._v(" "),a("div",{staticClass:"nav_option",class:{nav_option_active:2==t.isActive},on:{click:t.gogudinfeiyon_config}},[a("span",[t._v("固定费用配置")])])]),t._v(" "),a("el-form",{staticClass:"form_inline",attrs:{inline:!0,model:t.formSearch}},[a("el-form-item",{attrs:{label:"所属组织",size:"small"}},[a("el-cascader",{ref:"cascader",attrs:{options:t.dataTree,props:t.defaultProps2,clearable:""},on:{change:t.handleChange},model:{value:t.option1,callback:function(e){t.option1=e},expression:"option1"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"选择小区",size:"small"}},[a("el-select",{attrs:{placeholder:"请选择小区"},model:{value:t.formSearch.xqId,callback:function(e){t.$set(t.formSearch,"xqId",e)},expression:"formSearch.xqId"}},t._l(t.xqTree,function(t,e){return a("el-option",{key:e,attrs:{label:t.name,value:t.id}})}),1)],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{size:"small"},on:{click:t.getlist}},[t._v("查 询")])],1)],1),t._v(" "),a("div",{staticClass:"equi"},[a("div",{staticClass:"chooseCommunity",staticStyle:{position:"static"}},[a("div",{staticClass:"community"},[a("div",{staticClass:"communityContent"},[a("el-tree",{attrs:{data:t.formData,props:t.defaultProps,load:t.loadNode,lazy:"","node-key":"id","expand-on-click-node":!1},scopedSlots:t._u([{key:"default",fn:function(e){var o=e.node,i=e.data;return a("div",{staticClass:"custom-tree-node"},[a("el-radio-group",{on:{change:function(e){return t.changeRadio(i)}},model:{value:t.typeId.id,callback:function(e){t.$set(t.typeId,"id",e)},expression:"typeId.id"}},[a("el-radio",{attrs:{label:o.id}},[a("span",[t._v(t._s(o.label))])])],1)],1)}}])})],1)])]),t._v(" "),a("div",{staticClass:"settingsEle",staticStyle:{position:"static"}},[a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.inforList,"highlight-current-row":""},on:{"selection-change":t.selsChange}},[a("el-table-column",{staticClass:"ccc",attrs:{type:"selection",width:"55",label:"全选"}}),t._v(" "),a("el-table-column",{attrs:{prop:"name",label:"分类",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{label:"单价"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-form",[a("el-form-item",{attrs:{label:"￥"}},[a("el-input",{staticStyle:{width:"200px"},model:{value:e.row.unitPrice,callback:function(a){t.$set(e.row,"unitPrice",a)},expression:"scope.row.unitPrice"}}),t._v(" "),a("span",[t._v("/"+t._s(e.row.unit))])],1)],1)]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"是否启用"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-radio-group",{model:{value:e.row.useAble,callback:function(a){t.$set(e.row,"useAble",a)},expression:"scope.row.useAble"}},[a("el-radio",{attrs:{label:1}},[a("span",[t._v("是")])]),t._v(" "),a("el-radio",{attrs:{label:0}},[a("span",[t._v("否")])])],1)]}}])})],1),t._v(" "),a("div",{staticStyle:{"text-align":"center","margin-top":"20px"}},[a("el-button",{on:{click:t.updateMeterPriceConfig}},[t._v("保存")])],1)],1)])],1)},staticRenderFns:[]};var r=a("VU/8")(s,l,!1,function(t){a("TKk5")},"data-v-02374b04",null);e.default=r.exports},TKk5:function(t,e){}});
//# sourceMappingURL=78.4414e336dbb3a1c34b26.js.map
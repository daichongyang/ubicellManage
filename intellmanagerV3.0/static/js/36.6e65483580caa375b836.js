webpackJsonp([36],{"381B":function(t,e){},"57/v":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a={data:function(){return{aaa:"",headIcon:"",dushuNum:"",dushu:!1,total:1,addFormVisible:!1,addFormVisible1:!1,addFormVisible2:!1,listLoading:!1,sels:[],checkList:[],inforList:[],selectArr:[],checkInfor:{current:1,size:10,apartmentId:""},addForm:{},updataForm:{}}},methods:{reloadCon:function(){location.reload()},checkNum:function(t,e,n){console.log(n);var a={houseId:t,type:n.devType};console.log(a),getPowerNumberByHouseId(a).then(function(t){console.log(t),200===t.data.code?n.nowNum=t.data.data:alert("更新失败")})},showBill:function(){console.log(this.sels);var t=this;if(0!=this.sels.length){this.sels.filter(function(e){for(var n=0;n<e.handwritten.length;n++){if(e.handwritten[n].nowNum-e.handwritten[n].lastNum==0)return void(t.addFormVisible1=!0);if(e.handwritten[n].nowNum&&e.handwritten[n].nowNum-e.handwritten[n].lastNum<0)return void(t.addFormVisible2=!0)}return e});t.addFormVisible=!0}else alert("请勾选您要生成账单的房间")},gocharging_config_price:function(){this.$router.push({path:"/charging_config_price"})},changeInput:function(t,e){console.log(t),console.log(e),t.nowNum=e},updateInfor:function(){var t=this,e=this,n=[];this.sels.filter(function(t){for(var a=0;a<t.handwritten.length;a++){var i={createType:e.addForm.createType,payTime:e.addForm.payTime,devType:t.handwritten[a].devType,endNum:t.handwritten[a].nowNum,startNum:t.handwritten[a].lastNum,startTime:t.handwritten[a].lastTime,houseId:t.houseId,leaseId:t.leaseId};n.push(i)}return t});console.log(n),0!=n.length?handwrittenGenerate(n).then(function(e){console.log(e),t.addFormVisible=!1,200===e.data.code?(alert("生成账单成功"),t.getlist()):109==e.data.code?alert(e.data.msg):alert("生成账单失败")}).catch(function(t){alert("请求失败")}):alert("请勾选需要生成账单的水电表")},getApartmentList:function(){},getList:function(){var t=this,e=this.checkInfor;console.log(e),handwrittenList(e).then(function(e){console.log(e),200===e.data.code&&(t.inforList=e.data.data.records.filter(function(t){for(var e=0;e<t.handwritten.length;e++)t.handwritten[e].lastTime&&(t.handwritten[e].lastTimee=getDateArray(t.handwritten[e].lastTime)[16]),t.handwritten[e].lastNum&&(t.handwritten[e].lastNum=t.handwritten[e].lastNum.toFixed(2)),t.handwritten[e].nowNum&&(t.handwritten[e].nowNum=t.handwritten[e].nowNum.toFixed(2));return t}),t.total=e.data.data.pages)})},changeItem:function(t,e){},handleCurrentChange:function(t){this.checkInfor.current=t,this.getlist()},selsChange:function(t){this.sels=t.filter(function(t){if(1!==t.isExist)return t})}},mounted:function(){}},i={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"modlude"},[n("el-col",{staticClass:"toolbar",staticStyle:{"padding-bottom":"0px"},attrs:{span:24}},[n("el-form",{staticClass:"gridContt",attrs:{inline:!0}},[n("el-form",{attrs:{inline:!0}},[n("el-form-item",{attrs:{size:"small",label:"公寓/小区"}},[n("el-select",{attrs:{size:"small",placeholder:"输入公寓/小区名"},on:{change:function(e){t.checkInfor.current=1,t.getList}},model:{value:t.checkInfor.apartmentId,callback:function(e){t.$set(t.checkInfor,"apartmentId",e)},expression:"checkInfor.apartmentId"}},t._l(t.selectArr,function(t){return n("el-option",{key:t.apartmentId,attrs:{label:t.name,value:t.apartmentId}})}),1)],1)],1),t._v(" "),n("el-form",{staticClass:"button"},[n("el-form-item",[n("el-button",{attrs:{type:"primary",size:"medium"},on:{click:t.gocharging_config_price}},[t._v("配置单价")])],1),t._v(" "),n("el-form-item",[n("el-button",{attrs:{type:"primary",size:"medium"},on:{click:t.getList}},[t._v("查询")])],1),t._v(" "),n("el-form-item",[n("el-button",{attrs:{type:"primary",size:"medium"},on:{click:t.reloadCon}},[t._v("重置")])],1)],1)],1)],1),t._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:t.inforList,"highlight-current-row":""},on:{"selection-change":t.selsChange}},[n("el-table-column",{staticClass:"ccc",attrs:{type:"selection",width:"55",label:"全选"}}),t._v(" "),n("el-table-column",{attrs:{prop:"name",label:"门牌号"}}),t._v(" "),n("el-table-column",{attrs:{prop:"tenant",label:"承租人"}}),t._v(" "),n("el-table-column",{attrs:{prop:"",label:"类型"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.handwritten?n("div",{staticStyle:{"line-height":"40px"}},[t._v(t._s(1==e.row.handwritten[0].devType?"冷水表":2==e.row.handwritten[0].devType?"电表":"热水表"))]):t._e(),t._v(" "),e.row.handwritten?n("div",{staticStyle:{"line-height":"40px"}},[t._v(t._s(1==e.row.handwritten[1].devType?"冷水表":2==e.row.handwritten[1].devType?"电表":"热水表"))]):t._e(),t._v(" "),e.row.handwritten?n("div",{staticStyle:{"line-height":"40px"}},[t._v(t._s(1==e.row.handwritten[2].devType?"冷水表":2==e.row.handwritten[2].devType?"电表":"热水表"))]):t._e()]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"typeName",label:"上次度数"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-input",{staticStyle:{width:"100px"},attrs:{palceholder:"请输入"},model:{value:e.row.handwritten[0].lastNum,callback:function(n){t.$set(e.row.handwritten[0],"lastNum",n)},expression:"scope.row.handwritten[0].lastNum"}}),t._v(" "),n("el-input",{staticStyle:{width:"100px"},attrs:{palceholder:"请输入"},model:{value:e.row.handwritten[1].lastNum,callback:function(n){t.$set(e.row.handwritten[1],"lastNum",n)},expression:"scope.row.handwritten[1].lastNum"}}),t._v(" "),n("el-input",{staticStyle:{width:"100px"},attrs:{palceholder:"请输入"},model:{value:e.row.handwritten[2].lastNum,callback:function(n){t.$set(e.row.handwritten[2],"lastNum",n)},expression:"scope.row.handwritten[2].lastNum"}})]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"createTime",label:"本次度数"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.handwritten,function(e){return n("el-input",{key:e.nowNum,staticStyle:{width:"100px"},attrs:{value:e.nowNum,palceholder:"请输入"},on:{change:function(n){return t.changeInput(e,n)}}})})}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"promiseMan",label:"用量",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("div",{staticStyle:{"line-height":"40px"}},[t._v(t._s(null==e.row.handwritten[0].nowNum||null==e.row.handwritten[0].lastNum?0:(e.row.handwritten[0].nowNum-e.row.handwritten[0].lastNum).toFixed(2))+"\n          ")]),t._v(" "),n("div",{staticStyle:{"line-height":"40px"}},[t._v(t._s(null==e.row.handwritten[1].nowNum||null==e.row.handwritten[1].lastNum?0:(e.row.handwritten[1].nowNum-e.row.handwritten[1].lastNum).toFixed(2)))]),t._v(" "),n("div",{staticStyle:{"line-height":"40px"}},[t._v(t._s(null==e.row.handwritten[2].nowNum||null==e.row.handwritten[2].lastNum?0:(e.row.handwritten[2].nowNum-e.row.handwritten[2].lastNum).toFixed(2)))])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("div",{staticStyle:{"line-height":"40px"}},[1==e.row.handwritten[0].isAuto?n("el-button",{attrs:{size:"small"},on:{click:function(n){return t.checkNum(e.row.houseId,e.row.leaseId,e.row.handwritten[0])}}},[t._v("更新读数")]):t._e()],1),t._v(" "),n("div",{staticStyle:{"line-height":"40px"}},[1==e.row.handwritten[1].isAuto?n("el-button",{attrs:{size:"small"},on:{click:function(n){return t.checkNum(e.row.houseId,e.row.leaseId,e.row.handwritten[1])}}},[t._v("更新读数")]):t._e()],1),t._v(" "),n("div",{staticStyle:{"line-height":"40px"}},[1==e.row.handwritten[2].isAuto?n("el-button",{attrs:{size:"small"},on:{click:function(n){return t.checkNum(e.row.houseId,e.row.leaseId,e.row.handwritten[2])}}},[t._v("更新读数")]):t._e()],1)]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"lastTime",label:"上次抄表时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("div",{staticStyle:{"line-height":"40px"}},[t._v(t._s(e.row.handwritten[0].lastTimee))]),t._v(" "),n("div",{staticStyle:{"line-height":"40px"}},[t._v(t._s(e.row.handwritten[1].lastTimee))]),t._v(" "),n("div",{staticStyle:{"line-height":"40px"}},[t._v(t._s(e.row.handwritten[2].lastTimee))])]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"latestTime",label:"表类型"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("div",{class:{green:1==e.row.handwritten[0].isAuto},staticStyle:{"line-height":"40px"}},[t._v(t._s(0==e.row.handwritten[0].isAuto?"手抄表":"智能表"))]),t._v(" "),n("div",{class:{green:1==e.row.handwritten[1].isAuto},staticStyle:{"line-height":"40px"}},[t._v(t._s(0==e.row.handwritten[1].isAuto?"手抄表":"智能表"))]),t._v(" "),n("div",{class:{green:1==e.row.handwritten[2].isAuto},staticStyle:{"line-height":"40px"}},[t._v(t._s(0==e.row.handwritten[2].isAuto?"手抄表":"智能表"))])]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"rentCost",label:"抄表状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("div",{class:{green:1==e.row.handwritten[0].status,red:0==e.row.handwritten[0].status},staticStyle:{"line-height":"40px"}},[t._v(t._s(0==e.row.handwritten[0].status?"本月未抄":"本月已抄"))]),t._v(" "),n("div",{class:{green:1==e.row.handwritten[1].status,red:0==e.row.handwritten[1].status},staticStyle:{"line-height":"40px"}},[t._v(t._s(0==e.row.handwritten[1].status?"本月未抄":"本月已抄"))]),t._v(" "),n("div",{class:{green:1==e.row.handwritten[2].status,red:0==e.row.handwritten[2].status},staticStyle:{"line-height":"40px"}},[t._v(t._s(0==e.row.handwritten[2].status?"本月未抄":"本月已抄"))])]}}])})],1),t._v(" "),n("el-dialog",{attrs:{title:"生成账单",visible:t.addFormVisible,"close-on-click-modal":!1},on:{"update:visible":function(e){t.addFormVisible=e}}},[n("el-form",{ref:"addForm",attrs:{model:t.addForm,"label-width":"110px"}},[n("el-form-item",{attrs:{size:"small",label:"账单生成方式"}},[n("el-select",{attrs:{size:"small",placeholder:"请选择账单生成方式"},model:{value:t.addForm.createType,callback:function(e){t.$set(t.addForm,"createType",e)},expression:"addForm.createType"}},[n("el-option",{attrs:{label:"跟随账期",value:0}}),t._v(" "),n("el-option",{attrs:{label:"指定支付日期",value:1}})],1)],1),t._v(" "),1==t.addForm.createType?n("el-form-item",{attrs:{label:"账单支付时间"}},[n("el-date-picker",{attrs:{type:"date","value-format":"timestamp"},model:{value:t.addForm.payTime,callback:function(e){t.$set(t.addForm,"payTime",e)},expression:"addForm.payTime"}})],1):t._e()],1),t._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{nativeOn:{click:function(e){t.addFormVisible=!1}}},[t._v("取消")]),t._v(" "),n("el-button",{attrs:{type:"primary"},nativeOn:{click:function(e){return t.updateInfor(e)}}},[t._v("提交")])],1)],1),t._v(" "),n("el-dialog",{attrs:{visible:t.addFormVisible1},on:{"update:visible":function(e){t.addFormVisible1=e}}},[n("span",[t._v("有表用量为0，是否继续")]),t._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.addFormVisible1=!1}}},[t._v("取 消")]),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:function(e){t.addFormVisible=!0,t.addFormVisible1=!1}}},[t._v("确 定")])],1)]),t._v(" "),n("el-dialog",{attrs:{visible:t.addFormVisible2},on:{"update:visible":function(e){t.addFormVisible2=e}}},[n("span",[t._v("有表用量小于0")]),t._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary"},on:{click:function(e){t.addFormVisible=!1}}},[t._v("确 定")])],1)]),t._v(" "),n("el-col",{staticClass:"paginationt",attrs:{span:24}},[n("el-pagination",{staticClass:"pagination",attrs:{layout:"prev, pager, next","page-size":10,"page-count":t.total},on:{"current-change":t.handleCurrentChange}})],1)],1)},staticRenderFns:[]};var r=n("VU/8")(a,i,!1,function(t){n("381B")},"data-v-6d69520e",null);e.default=r.exports}});
//# sourceMappingURL=36.6e65483580caa375b836.js.map
webpackJsonp([32],{"F3+c":function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=o("prc4"),s=o("qKdJ"),i={data:function(){return{headers:{Authorization:sessionStorage.getItem("Authorization"),token:sessionStorage.getItem("token")},disabled:!1,screensType:1,devicesType:1,projectConfigId:"",uploadToRealPath:"",picsDialog:!1,xqId:"",total:0,addDialog:!1,dataInfor:JSON.parse(this.$route.query.configInfor),configInfor:[],formData:[],deleBatch:[],addBatch:[],seach:{current:1,size:10},picSeach:{},picsArr:[],imageUrl:"",picInfor:{tempImgMode:1},uploadImg:{entityImgId:""}}},methods:{getImgid:function(t){console.log(t),this.uploadImg.entityImgId=t},setImgeToEntity:function(t){var e=this;console.log(t);var o={tempId:this.picInfor.tempId,tempImgMode:this.picInfor.tempImgMode,tempImgName:t.urll,tempTypeCode:this.picInfor.typeCode};console.log(o),Object(s._143)(o).then(function(t){console.log(t),200==t.data.code&&(e.$message("修改成功"),e.getlist()),e.picsDialog=!1})},iotdelImg:function(t,e){var o=this,a={entityImgId:e,imgName:t.urll};this.$confirm("确认删除吗？").then(function(t){Object(s._105)(a).then(function(t){console.log(t),200==t.data.code&&(o.$message("删除成功"),o.gettoShowImgs(o.picSeach.id,o.picSeach.xqId))})}).catch(function(t){})},iotdelAllImg:function(t){var e=this,o={entityImgId:t};this.$confirm("确认删除吗？").then(function(t){Object(s._104)(o).then(function(t){console.log(t),200==t.data.code&&(e.$message("删除成功"),e.gettoShowImgs(e.picSeach.id,e.picSeach.xqId))})}).catch(function(t){})},addEntityImg:function(){var t=this,e=this.picInfor;console.log(e),Object(s.d)(e).then(function(e){console.log(e),200==e.data.code&&t.gettoShowImgs(t.picSeach.id,t.picSeach.xqId)})},gettoShowImgs:function(t,e,o){var a=this;this.picInfor.xqId=e,this.picInfor.tempId=t,this.picInfor.typeCode=o;var i={xqId:e};console.log(i),Object(s._156)(i).then(function(t){console.log(t),200==t.data.code&&(a.picsArr=t.data.data.filter(function(t){return t.imgNames&&t.imgNames.filter(function(e){return e.urll=e.url,e.url=t.url+e.url,e}),t}))})},showAddUsers:function(t,e){var o=this;console.log(t),this.projectConfigId=t,this.xqId=e,Object(s._155)(this.seach).then(function(t){console.log(t),200==t.data.code&&(o.formData=t.data.data.records,o.total=t.data.data.total)})},deletedelDeviceOne:function(t,e){var o=this,a={id:t,typeCode:e};this.$confirm("确定要删除吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(s._3)(a).then(function(t){console.log(t),200==t.data.code?(o.getlist(),o.$message("删除成功")):o.$message("删除失败")})}).catch(function(){})},deletedelModule:function(t,e){var o=this,a={roomId:t,typeCode:e};this.$confirm("确定要删除吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(s._9)(a).then(function(t){console.log(t),200==t.data.code?(o.getlist(),o.$message("删除成功")):o.$message("删除失败")})}).catch(function(){})},getList:function(){var t=this,e=this.dataInfor;Object(s._66)(e).then(function(e){console.log(e),200==e.data.code?t.configInfor=e.data.data:t.$message(e.data.msg)})},changesetNameToEntity:function(t,e){var o=this;console.log(t);var a={tempId:t.id,tempImgName:t.name,tempImgMode:e||t.typeCode};Object(s._144)(a).then(function(t){console.log(t),200==t.data.code?(o.getlist(),o.$message("操作成功")):o.$message("操作失败")})},deletedelProjectConfig:function(t){var e=this,o={projectConfigId:t};Object(s._10)(o).then(function(t){console.log(t),200==t.data.code?(e.$message("删除成功"),e.$router.go(-1)):e.$message("删除失败")})},pushpushThisConfig:function(t){var e=this;console.log(t);var o={configId:t};Object(s._125)(o).then(function(t){console.log(t),200==t.data.code?e.$message("推送成功"):e.$message("推送失败")})},handleCurrentPage:function(t){this.seach.current=t,this.showAddUsers()},handleSelectionChange:function(t,e){console.log(t),this.deleBatch=t},handleSelectionChange1:function(t,e){console.log(t,e),this.addBatch=t},addbindUserForConfig:function(){var t=this,e={acHouseUserVoList:[],projectConfigId:this.projectConfigId,xqId:this.xqId};e.acHouseUserVoList=this.addBatch,Object(s.D)(e).then(function(e){console.log(e),200==e.data.code&&(t.$message("添加成功"),t.getlist())}),this.addDialog=!1},deleInfor:function(){var t=this,e="";0!=this.deleBatch.length&&this.deleBatch.forEach(function(t){e=t.id+"_"+e}),console.log(e),this.$confirm("确认删除吗？").then(function(o){Object(s._33)(e).then(function(e){console.log(e),200==e.data.code&&(t.$message("删除成功"),t.getlist())})}).catch(function(t){})},handleAvatarSuccess:function(t,e){console.log(t),this.imageUrl=URL.createObjectURL(e.raw),this.gettoShowImgs(this.picSeach.id,this.picSeach.xqId)}},mounted:function(){this.uploadToRealPath=this.$root.uploadToRealPath,this.getlist(),console.log(JSON.parse(this.$route.query.configInfor))},components:{paging:a.a}},n={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("section",{staticClass:"modlude"},[t._l(t.configInfor,function(e){return o("div",{key:e.id,staticClass:"iot_smart_box"},[o("h3",{staticClass:"main_name"},[t._v(t._s(e.main.mainName))]),t._v(" "),o("el-row",{staticClass:"iot_smart_btn"},[o("el-button",{attrs:{type:"warning"},on:{click:function(o){return t.pushpushThisConfig(e.id)}}},[t._v("推送更新")]),t._v(" "),o("el-button",{attrs:{type:"danger"},on:{click:function(o){return t.deletedelProjectConfig(e.id)}}},[t._v("删除工程")])],1),t._v(" "),o("div",{staticClass:"iot_smart_module"},[o("div",[t._v("全局参数")]),t._v(" "),e.globalParam?o("div",{staticClass:"module_cont"},[o("div",{staticClass:"module_cont_json"},[o("el-row",{attrs:{gutter:20}},[o("el-col",{attrs:{span:4}},[o("span",[t._v("运行模式：")]),o("span",{staticClass:"color_active"},[t._v(t._s(0==e.globalParam.workPattern?"自动":1==e.globalParam.workPattern?"远程":"本地"))])]),t._v(" "),o("el-col",{attrs:{span:4}},[o("span",[t._v("使用协议：")]),o("span",{staticClass:"color_active"},[t._v(t._s(e.globalParam.protocolVersion))])])],1)],1)]):o("div",{staticStyle:{color:"#999"}},[t._v("暂无数据")])]),t._v(" "),o("div",{staticClass:"iot_smart_module"},[o("div",[t._v("工程参数")]),t._v(" "),e.projectParam?o("div",{staticClass:"module_cont"},[o("div",{staticClass:"module_cont_json"},[o("el-row",{attrs:{gutter:20}},[o("el-col",{attrs:{span:4}},[o("span",[t._v("工程描述：")]),o("span",{staticClass:"color_active"},[t._v(t._s(e.projectParam.describer))])]),t._v(" "),o("el-col",{attrs:{span:4}},[o("span",[t._v("群组备注：")]),o("span",{staticClass:"color_active"},[t._v(t._s(e.projectParam.groupRemark))])]),t._v(" "),o("el-col",{attrs:{span:4}},[o("span",[t._v("用户名：")]),o("span",{staticClass:"color_active"},[t._v(t._s(e.projectParam.userName))])]),t._v(" "),o("el-col",{attrs:{span:4}},[o("span",[t._v("密码：")]),o("span",{staticClass:"color_active"},[t._v(t._s(e.projectParam.userPass))])]),t._v(" "),o("el-col",{attrs:{span:4}},[o("span",[t._v("服务器：")]),o("span",{staticClass:"color_active"},[t._v(t._s(e.projectParam.serverHost))])]),t._v(" "),o("el-col",{attrs:{span:4}},[o("span",[t._v("端口：")]),o("span",{staticClass:"color_active"},[t._v(t._s(e.projectParam.serverPort))])])],1),t._v(" "),o("el-row",{attrs:{gutter:20}},[o("el-col",{attrs:{span:4}},[o("span",[t._v("子网ID：")]),o("span",{staticClass:"color_active"},[t._v(t._s(e.projectParam.subnetId))])]),t._v(" "),o("el-col",{attrs:{span:4}},[o("span",[t._v("设备ID：")]),o("span",{staticClass:"color_active"},[t._v(t._s(e.projectParam.devId))])])],1)],1)]):o("div",{staticStyle:{color:"#999"}},[t._v("暂无数据")])]),t._v(" "),o("div",{staticClass:"iot_smart_module"},[o("div",[t._v("用户列表 \n        "),o("el-button",{staticStyle:{float:"right","margin-left":"20px"},attrs:{type:"danger",size:"small"},on:{click:t.deleInfor}},[t._v("删除")]),t._v(" "),o("el-button",{staticStyle:{float:"right"},attrs:{type:"primary",size:"small"},on:{click:function(o){t.showAddUsers(e.id,e.xqId),t.addDialog=!0}}},[t._v("添加")])],1),t._v(" "),e.users?o("div",{staticClass:"module_cont"},[o("el-table",{staticStyle:{width:"100%"},attrs:{data:e.users},on:{"selection-change":t.handleSelectionChange}},[o("el-table-column",{attrs:{type:"selection",width:"55"}}),t._v(" "),o("el-table-column",{attrs:{prop:"name",label:"姓名"}}),t._v(" "),o("el-table-column",{attrs:{prop:"nickname",label:"昵称"}}),t._v(" "),o("el-table-column",{attrs:{prop:"phone",label:"手机号"}}),t._v(" "),o("el-table-column",{attrs:{prop:"showName",label:"家园号"}})],1)],1):o("div",{staticStyle:{color:"#999"}},[t._v("暂无数据")])]),t._v(" "),o("div",{staticClass:"iot_smart_module"},[o("div",[t._v("场景列表  \n        "),o("el-select",{attrs:{placeholder:"请选择",size:"small"},model:{value:t.picInfor.tempImgMode,callback:function(e){t.$set(t.picInfor,"tempImgMode",e)},expression:"picInfor.tempImgMode"}},[o("el-option",{attrs:{label:"激活图片",value:1}}),t._v(" "),o("el-option",{attrs:{label:"未激活图片",value:0}})],1)],1),t._v(" "),e.screens?o("div",{staticClass:"module_cont"},[o("div",{staticClass:"module_cont_screens"},t._l(e.screens,function(e){return o("div",{key:e.id,staticClass:"module_cont_screens_item"},[o("div",[1==t.picInfor.tempImgMode?o("img",{attrs:{src:e.img,alt:""},on:{click:function(o){t.gettoShowImgs(e.id,e.xqId,e.typeCode),t.picsDialog=!0}}}):t._e(),t._v(" "),0==t.picInfor.tempImgMode?o("img",{attrs:{src:e.imgoff,alt:""},on:{click:function(o){t.gettoShowImgs(e.id,e.xqId,e.typeCode),t.picsDialog=!0}}}):t._e()]),t._v(" "),o("div",{staticStyle:{"margin-top":"10px"}},[o("el-input",{attrs:{size:"small",placeholder:"请输入内容",value:e.name},model:{value:e.name,callback:function(o){t.$set(e,"name",o)},expression:"scItem.name"}})],1),t._v(" "),o("div",{staticClass:"module_cont_screens_bot"},[o("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(o){return t.changesetNameToEntity(e)}}},[t._v("保存")]),t._v(" "),o("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(o){return t.deletedelDeviceOne(e.id,e.typeCode)}}},[t._v("删除")])],1)])}),0)]):o("div",{staticStyle:{color:"#999"}},[t._v("暂无数据")])]),t._v(" "),o("div",{staticClass:"iot_smart_module"},[o("div",[t._v("Room列表  \n        ")]),t._v(" "),e.zones?o("div",{staticClass:"module_cont"},[o("div",{staticClass:"module_cont_room"},t._l(e.zones,function(e){return o("div",{key:e.id,staticClass:"room_name"},[o("h4",{staticStyle:{"margin-bottom":"20px","text-align":"center"}},[t._v(t._s(e.name))]),t._v(" "),t._l(e.modules,function(e){return o("div",{key:e.id},[o("div",{staticClass:"iot_smart_module"},[o("div",[t._v(t._s(e.name)+"  \n                  "),t._v(" "),o("el-button",{staticStyle:{float:"right"},attrs:{type:"danger",size:"small"},on:{click:function(o){return t.deletedelModule(e.roomId,e.typeCode)}}},[t._v("删除全部")])],1),t._v(" "),e.devices?o("div",{staticClass:"module_cont"},[o("div",{staticClass:"module_cont_screens"},t._l(e.devices,function(a){return o("div",{key:a.id,staticClass:"module_cont_screens_item"},[o("div",[o("img",{attrs:{src:a.img,alt:""},on:{click:function(o){t.gettoShowImgs(a.id,e.xqId,e.typeCode),t.picsDialog=!0,t.picInfor.tempImgMode=1}}})]),t._v(" "),o("div",{staticStyle:{"margin-top":"10px"}},[o("el-input",{attrs:{size:"small",placeholder:"请输入内容",value:a.name},model:{value:a.name,callback:function(e){t.$set(a,"name",e)},expression:"zmmoItemItem.name"}})],1),t._v(" "),o("div",{staticClass:"module_cont_screens_bot"},[o("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(o){return t.changesetNameToEntity(a,e.typeCode)}}},[t._v("保存")]),t._v(" "),o("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(o){return t.deletedelDeviceOne(a.id,e.typeCode)}}},[t._v("删除")])],1)])}),0)]):o("div",{staticStyle:{color:"#999"}},[t._v("暂无数据")])])])})],2)}),0)]):o("div",{staticStyle:{color:"#999"}},[t._v("暂无数据")])])],1)}),t._v(" "),o("el-dialog",{attrs:{title:"新增用户",visible:t.addDialog},on:{"update:visible":function(e){t.addDialog=e}}},[o("el-table",{staticStyle:{width:"100%"},attrs:{data:t.formData,stripe:""},on:{"selection-change":t.handleSelectionChange1}},[o("el-table-column",{attrs:{type:"selection",width:"55"}}),t._v(" "),o("el-table-column",{attrs:{prop:"name",label:"姓名"}}),t._v(" "),o("el-table-column",{attrs:{prop:"nickname",label:"昵称"}}),t._v(" "),o("el-table-column",{attrs:{prop:"phone",label:"手机号"}}),t._v(" "),o("el-table-column",{attrs:{prop:"sectionName",label:"区域名称"}}),t._v(" "),o("el-table-column",{attrs:{prop:"houseName",label:"房间名称"}})],1),t._v(" "),o("paging",{attrs:{"get-total":t.total},on:{changePage:t.handleCurrentPage}}),t._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{size:"medium "},on:{click:function(e){t.addDialog=!1}}},[t._v("取 消")]),t._v(" "),o("el-button",{attrs:{size:"medium "},on:{click:t.addbindUserForConfig}},[t._v("确 定")])],1)],1),t._v(" "),o("el-dialog",{attrs:{title:"图片组",visible:t.picsDialog},on:{"update:visible":function(e){t.picsDialog=e}}},[o("el-form",{staticClass:"form_inline"},[o("el-form-item",{attrs:{label:"类别名称",size:"small"}},[o("el-input",{attrs:{size:"small",placeholder:"请输入内容"},model:{value:t.picInfor.imgTypeName,callback:function(e){t.$set(t.picInfor,"imgTypeName",e)},expression:"picInfor.imgTypeName"}})],1),t._v(" "),o("el-form-item",[o("el-button",{attrs:{size:"small"},on:{click:function(e){t.showImport=!1}}},[t._v("查询")]),t._v(" "),o("el-button",{attrs:{size:"small"},on:{click:t.addEntityImg}},[t._v("添加")])],1)],1),t._v(" "),t._l(t.picsArr,function(e,a){return o("div",{key:a},[o("div",{staticClass:"picPot"},[o("span",{staticStyle:{color:"#a1d6f4"}},[t._v(t._s(e.imgTypeName))]),t._v(" "),o("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(o){return t.iotdelAllImg(e.id)}}},[t._v("删除")])],1),t._v(" "),o("div",[o("el-upload",{attrs:{action:"/intellmanagerV3.0/iot/uploadImgFile",data:t.uploadImg,headers:t.headers,"list-type":"picture-card","file-list":e.imgNames,"on-success":t.handleAvatarSuccess},scopedSlots:t._u([{key:"file",fn:function(a){var s=a.file;return o("div",{},[o("img",{staticClass:"el-upload-list__item-thumbnail",attrs:{src:s.url,alt:""}}),t._v(" "),o("span",{staticClass:"el-upload-list__item-actions"},[t.disabled?t._e():o("span",{staticClass:"el-upload-list__item-delete",on:{click:function(e){return t.setImgeToEntity(s)}}},[o("i",{staticClass:"el-icon-download"})]),t._v(" "),t.disabled?t._e():o("span",{staticClass:"el-upload-list__item-delete",on:{click:function(o){return t.iotdelImg(s,e.id)}}},[o("i",{staticClass:"el-icon-delete"})])])])}}],null,!0)},[o("i",{staticClass:"el-icon-plus",attrs:{slot:"default"},on:{click:function(o){return t.getImgid(e.id)}},slot:"default"})])],1)])})],2)],2)},staticRenderFns:[]};var l=o("VU/8")(i,n,!1,function(t){o("jPyj")},"data-v-744e5467",null);e.default=l.exports},jPyj:function(t,e){}});
//# sourceMappingURL=32.fdea125678d870e5fe09.js.map
webpackJsonp([26],{dGXu:function(e,t){},rpLz:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=a("Gu7T"),n=a.n(o),l=a("bOdI"),i=a.n(l),s=a("prc4"),r=a("qKdJ"),c={data:function(){var e;return e={isActive:2,updateDialog:!1,defineDialog:!1,inforList:[],option1:[],xqTree:[],isAddorUpdate:1,formSearch:{},formData:[],formUpdate:{},total:0,dataTree:[],defaultProps:{children:"children",label:"name"},defaultProps2:{children:"children",label:"name",value:"id",expandTrigger:"hover",checkStrictly:!0},typeId:{}},i()(e,"formUpdate",[]),i()(e,"houseFixed",[]),i()(e,"defineData",[]),e},methods:{getHouseFixedFeeInfo:function(e){var t=this,a={houseId:e.id};this.defineDialog=!0,Object(r._92)(a).then(function(e){console.log(e),200==e.data.code&&(t.defineData=e.data.data)})},addUpdateHouseFixedFeeList:function(){var e=this,t={houseId:this.formUpdate.houseId,xqId:this.formUpdate.xqId,saves:[]};this.inforList.forEach(function(a){a.dynamicTags.forEach(function(e){a.cycle=e+"_"+a.cycle});var o={cost:a.num*a.price,cycle:a.cycle,num:a.num,optionName:a.optionName,price:a.price};a.optionName&&a.num&&a.price?t.saves.push(o):e.$message("请将信息填写完整")}),console.log(this.inforList,t),Object(r._168)(t).then(function(t){console.log(t),200==t.data.code?(e.$message("提交成功"),e.getlist()):e.$message("提交失败")}),this.updateDialog=!1},deleteRow:function(e,t){t.splice(e,1)},addList:function(){this.inforList.push({cost:"",cycle:"",num:"",optionName:"",price:"",dynamicTags:[],inputValue:"",inputVisible:!1})},gocharging_config_price:function(){this.$router.push({path:"/charging_config_price"})},updateShowBox:function(e){var t=this;this.updateDialog=!0,console.log(e);var a={houseId:e.id};Object(r._92)(a).then(function(e){console.log(e),t.inforList=[],200==e.data.code&&(e.data.data.forEach(function(e){var a={cost:"",cycle:"",num:e.num,optionName:e.optionName,price:e.price,dynamicTags:e.cycle.substr(0,e.cycle.length-1).split("_"),inputValue:"",inputVisible:!1};t.inforList.push(a)}),console.log(t.inforList))}),this.formUpdate={xqId:e.xqId,houseId:e.id}},loadNode:function(e,t){if(0==e.level)return t(e.data);var a=e.data.children||[],o=e.data.houses||[],l=[].concat(n()(a),n()(o));setTimeout(function(){t(l)},500)},getlist:function(){var e=this,t=this.formSearch;console.log(this.formSearch),Object(r._94)(t).then(function(t){console.log(t),200==t.data.code?(e.formData=t.data.data.records.filter(function(t){return t.gmtCreate&&(t.gmtCreate=e.$root.getDateArray(t.gmtCreate)[9]),t}),e.total=t.data.data.total):e.$message(t.data.msg)})},getInit:function(){var e=this;Object(r._115)({name:"",status:1}).then(function(t){console.log(t),200==t.data.code&&(e.dataTree=t.data.data,Object(r._196)({}).then(function(t){console.log(t),200==t.data.code&&(e.xqTree=t.data.data,e.formSearch.xqId=e.xqTree[0].id,e.getlist())}))}),Object(r._93)({}).then(function(t){console.log(t),200==t.data.code&&(e.houseFixed=t.data.data.filter(function(e){return e.disabled=!1,e}))})},handleCurrentPage:function(e){this.formSearch.current=e,this.getList()},handleChange:function(e){0!=e.length?(console.log(e),this.formSearch.orgId=this.$refs.cascader.getCheckedNodes()[0].data.id):this.formSearch.orgId="",this.getlist()},handleClose:function(e,t){t.dynamicTags.splice(t.dynamicTags.indexOf(e),1)},showInput:function(e){e.inputVisible=!0},handleInputConfirm:function(e){var t=e.inputValue;t&&e.dynamicTags.push(t),e.inputVisible=!1,e.inputValue=""},changeSelect:function(e){var t=this;console.log(e,this.inforList),this.inforList.forEach(function(a){if(a.optionName==e.optionName&&a!=e)return t.$message("收费项名称不能相同"),void(e.optionName="")})}},mounted:function(){this.getInit()},components:{paging:s.a}},u={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"modlude gudinfeiyon"},[a("div",{staticClass:"nav_options",staticStyle:{"margin-bottom":"20px"}},[a("div",{staticClass:"nav_option",class:{nav_option_active:1==e.isActive},on:{click:e.gocharging_config_price}},[a("span",[e._v("水电煤配置")])]),e._v(" "),a("div",{staticClass:"nav_option",class:{nav_option_active:2==e.isActive},on:{click:function(t){e.isActive=2}}},[a("span",[e._v("固定费用配置")])])]),e._v(" "),a("el-form",{staticClass:"form_inline",attrs:{inline:!0,model:e.formSearch}},[a("el-form-item",{attrs:{label:"所属组织",size:"small"}},[a("el-cascader",{ref:"cascader",attrs:{options:e.dataTree,props:e.defaultProps2,clearable:""},on:{change:e.handleChange},model:{value:e.option1,callback:function(t){e.option1=t},expression:"option1"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"选择小区",size:"small"}},[a("el-select",{attrs:{placeholder:"请选择小区"},model:{value:e.formSearch.xqId,callback:function(t){e.$set(e.formSearch,"xqId",t)},expression:"formSearch.xqId"}},e._l(e.xqTree,function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"房号",size:"small"}},[a("el-input",{attrs:{placeholder:"请输入房号"},model:{value:e.formSearch.houseNum,callback:function(t){e.$set(e.formSearch,"houseNum",t)},expression:"formSearch.houseNum"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"房间名称",size:"small"}},[a("el-input",{attrs:{placeholder:"请输入房间名称"},model:{value:e.formSearch.name,callback:function(t){e.$set(e.formSearch,"name",t)},expression:"formSearch.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"区域名称",size:"small"}},[a("el-input",{attrs:{placeholder:"请输入区域名称"},model:{value:e.formSearch.sectionName,callback:function(t){e.$set(e.formSearch,"sectionName",t)},expression:"formSearch.sectionName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"房间类型",size:"small"}},[a("el-select",{model:{value:e.formSearch.type,callback:function(t){e.$set(e.formSearch,"type",t)},expression:"formSearch.type"}},[a("el-option",{attrs:{label:"物业中心",value:1}}),e._v(" "),a("el-option",{attrs:{label:"业主房间",value:2}})],1)],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{size:"small"},on:{click:e.getlist}},[e._v("查 询")])],1)],1),e._v(" "),a("el-table",{ref:"table",staticStyle:{width:"100%"},attrs:{data:e.formData}},[a("el-table-column",{attrs:{prop:"name",label:"房间名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"houseNum",label:"房间号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"xqName",label:"小区名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"costOptions",label:"固定缴费项",width:"550"}}),e._v(" "),a("el-table-column",{attrs:{prop:"type",label:"房间类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(1==t.row.type?"物业中心":"业主房间")+"\n        ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",fixed:"right",width:"250"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){return e.getHouseFixedFeeInfo(t.row)}}},[e._v("查看详情")]),e._v(" "),a("el-button",{attrs:{type:"warning",size:"small"},on:{click:function(a){return e.updateShowBox(t.row)}}},[e._v("修 改")])]}}])})],1),e._v(" "),a("paging",{attrs:{"get-total":e.total},on:{changePage:e.handleCurrentPage}}),e._v(" "),a("el-dialog",{staticClass:"gudinfeiyon_dialog",attrs:{title:"修改",visible:e.updateDialog,"close-on-click-modal":!1},on:{"update:visible":function(t){e.updateDialog=t}}},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.addList}},[e._v("添 加")]),e._v(" "),a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.inforList,"highlight-current-row":""}},[a("el-table-column",{attrs:{prop:"name",label:"类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{placeholder:"请选择类型",size:"small"},on:{change:function(a){return e.changeSelect(t.row)}},model:{value:t.row.optionName,callback:function(a){e.$set(t.row,"optionName",a)},expression:"scope.row.optionName"}},e._l(e.houseFixed,function(e,t){return a("el-option",{key:t,attrs:{label:e.costName,value:e.costName,disabled:e.disabled}})}),1)]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"数量"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{size:"small"},model:{value:t.row.num,callback:function(a){e.$set(t.row,"num",a)},expression:"scope.row.num"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"单价（元）"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{size:"small"},model:{value:t.row.price,callback:function(a){e.$set(t.row,"price",a)},expression:"scope.row.price"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"缴费周期",width:"450"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._l(t.row.dynamicTags,function(o,n){return a("el-tag",{key:n,attrs:{closable:"","disable-transitions":!1},on:{close:function(a){return e.handleClose(o,t.row)}}},[e._v("\n              "+e._s(o)+"\n            ")])}),e._v(" "),t.row.inputVisible?a("el-input",{attrs:{size:"small"},on:{blur:function(a){return e.handleInputConfirm(t.row)}},nativeOn:{keyup:function(a){return!a.type.indexOf("key")&&e._k(a.keyCode,"enter",13,a.key,"Enter")?null:e.handleInputConfirm(t.row)}},model:{value:t.row.inputValue,callback:function(a){e.$set(t.row,"inputValue",a)},expression:"scope.row.inputValue"}}):a("el-button",{staticClass:"button-new-tag",attrs:{size:"small"},on:{click:function(a){return e.showInput(t.row)}}},[e._v("+ 周期")])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){return e.deleteRow(t.$index,e.inforList)}}},[e._v("删 除")])]}}])})],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.updateDialog=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.addUpdateHouseFixedFeeList}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{staticClass:"gudinfeiyon_define",attrs:{title:"详情",visible:e.defineDialog,"close-on-click-modal":!1},on:{"update:visible":function(t){e.defineDialog=t}}},e._l(e.defineData,function(t,o){return a("el-form",{key:o,staticClass:"form_inline",staticStyle:{"margin-bottom":"20px"},attrs:{"label-width":"100px"}},[a("el-form-item",{attrs:{label:"费用项名称:",size:"small"}},[a("el-input",{attrs:{placeholder:""},model:{value:t.optionName,callback:function(a){e.$set(t,"optionName",a)},expression:"item.optionName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"数量:",size:"small"}},[a("el-input",{attrs:{placeholder:""},model:{value:t.num,callback:function(a){e.$set(t,"num",a)},expression:"item.num"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"单价:",size:"small"}},[a("el-input",{attrs:{placeholder:""},model:{value:t.price,callback:function(a){e.$set(t,"price",a)},expression:"item.price"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"每月需缴纳:",size:"small"}},[a("el-input",{attrs:{placeholder:""},model:{value:t.cost,callback:function(a){e.$set(t,"cost",a)},expression:"item.cost"}})],1)],1)}),1)],1)},staticRenderFns:[]};var d=a("VU/8")(c,u,!1,function(e){a("dGXu")},"data-v-92b2c010",null);t.default=d.exports}});
//# sourceMappingURL=26.5c81d28b875f7652c2fb.js.map